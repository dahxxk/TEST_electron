{"version":3,"sources":["webpack:///webpack/bootstrap 565ce52b3c67ee413d65?95ae","webpack:///external \"electron\"?6928","webpack:///external \"crypto\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/main/index.js","webpack:///./src/main/createCaptureWindow.js","webpack:///./src/main/createFileManager.js","webpack:///./src/main/trimDesktop.js"],"names":["captureWindow","captureAndOpenItem","fileManager","then","capture","bind","createdFilename","writeImage","app","getPath","image","shell","openItem","process","platform","quit","on","CaptureWindow","win","BrowserWindow","show","loadURL","__dirname","clippingProfile","Promise","resolve","reject","ipcMain","once","_","error","dataURL","nativeImage","createFromDataURL","webContents","send","close","createCaptureWindow","getHash","buffer","shasum","crypto","createHash","update","digest","FileManager","dir","toPNG","filename","path","join","fs","writeFile","readFile","encoding","data","createFileManager","trimDesktop","displays","screen","getAllDisplays","windows","map","display","i","bounds","x","y","width","height","name","frame","transparent","alwaysOnTop","e","trimmedBounds","sourceDisplay","find","w","id","sender","profile","forEach"],"mappings":"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","file":"dist/main/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 190);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 565ce52b3c67ee413d65","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 12\n// module chunks = 0 1 2","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 187\n// module chunks = 1","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 188\n// module chunks = 1","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 189\n// module chunks = 1","import { app, shell } from \"electron\";\r\nimport createFileManager from \"./createFileManager\";\r\nimport trimDesktop from \"./trimDesktop\";\r\nimport createCaptureWindow from \"./createCaptureWindow\";\r\n\r\nlet captureWindow;\r\n\r\nfunction captureAndOpenItem() {\r\n  const fileManager = createFileManager();\r\n  return trimDesktop()\r\n    .then(captureWindow.capture.bind(captureWindow))\r\n    .then(image => {\r\n      // 임시 파일 저장 전용 폴더에 추출한 이미지 저장하기\r\n      const createdFilename = fileManager.writeImage(app.getPath(\"temp\"), image);\r\n      return createdFilename;\r\n    })\r\n    .then(shell.openItem.bind(shell))\r\n    .then(() => {\r\n      if (process.platform !== \"darwin\") {\r\n        app.quit();\r\n      }\r\n    })\r\n  ;\r\n}\r\n\r\n\r\n\r\napp.on(\"ready\", () => {\r\n  captureWindow = createCaptureWindow();\r\n  // captureAndOpenItem();\r\n  captureAndOpenItem();\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","import { ipcMain, BrowserWindow, nativeImage } from \"electron\";\r\n\r\nclass CaptureWindow {\r\n\r\n  constructor() {\r\n    this.win = new BrowserWindow({ show: false });\r\n    this.win.loadURL(`file://${__dirname}/../../captureWindow.html`);\r\n  }\r\n\r\n  capture(clippingProfile) {\r\n    return new Promise((resolve, reject) => {\r\n      ipcMain.once(\"REPLY_CAPTURE\", (_, { error, dataURL }) => {\r\n        if (error) {\r\n          reject(error);\r\n        } else {\r\n          // 이미지 데이터(base64 문자열)을 NativeImage 형식으로 변환하기\r\n          resolve(nativeImage.createFromDataURL(dataURL));\r\n        }\r\n      });\r\n      this.win.webContents.send(\"CAPTURE\", clippingProfile);\r\n    });\r\n  }\r\n\r\n  close() {\r\n    this.win.close();\r\n  }\r\n}\r\n\r\nfunction createCaptureWindow() {\r\n  return new CaptureWindow();\r\n}\r\n\r\nexport default createCaptureWindow;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/createCaptureWindow.js","import path from \"path\";\r\nimport fs from \"fs\";\r\nimport crypto from \"crypto\";\r\n\r\nfunction getHash(buffer) {\r\n  const shasum = crypto.createHash(\"sha1\");\r\n  shasum.update(buffer);\r\n  return shasum.digest(\"hex\");\r\n}\r\n\r\nclass FileManager {\r\n\r\n  writeImage(dir, image) {\r\n    return new Promise((resolve, reject) => {\r\n      const buffer = image.toPNG();\r\n      const filename = path.join(dir, `${getHash(buffer)}.png`);\r\n      fs.writeFile(filename, buffer, error => {\r\n        if (error) {\r\n          reject(error);\r\n        } else {\r\n          resolve(filename);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  readAsBase64string(filename) {\r\n    return new Promise((resolve, reject) => {\r\n      fs.readFile(filename, { encoding: \"base64\" }, (error, data) => {\r\n        if (error) {\r\n          reject(error);\r\n        } else {\r\n          resolve(data);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction createFileManager() {\r\n  return new FileManager();\r\n}\r\n\r\nexport default createFileManager;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/createFileManager.js","import { screen, ipcMain, BrowserWindow } from \"electron\";\r\n\r\nfunction trimDesktop() {\r\n  const displays = screen.getAllDisplays();\r\n  return new Promise((resolve, reject) => {\r\n    const windows = displays.map((display, i) => {\r\n      const { x, y, width, height } = display.bounds;\r\n      display.name = \"Screen \" + (i + 1);\r\n      const win = new BrowserWindow({\r\n        frame: false,\r\n        transparent: true,\r\n        alwaysOnTop: true,\r\n        x, y, width, height,\r\n      });\r\n      win.loadURL(`file://${__dirname}/../../index.html`);\r\n      return { win, display };\r\n    });\r\n\r\n    ipcMain.once(\"SEND_BOUNDS\", (e, { trimmedBounds }) => {\r\n      const sourceDisplay = windows.find(w => w.win.webContents.id === e.sender.id).display;\r\n      const profile = { sourceDisplay, trimmedBounds };\r\n      windows.forEach(w => w.win.close());\r\n      resolve(profile);\r\n    });\r\n  });\r\n}\r\n\r\nexport default trimDesktop;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/trimDesktop.js"],"sourceRoot":""}